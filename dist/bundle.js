"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e){return Object.prototype.toString.call(e)}function n(e){if(t(e).indexOf("String")<0||t(e).indexOf("Symbol")<0)throw Error("eventName 必须为字符串或Symbol类型")}function r(e){if(t(e).indexOf("Function")<0)throw Error("listener 必须为函数")}function i(e,t,n){for(var r=0;r<e.length;r++){if(n?_.toString(e[r])===_.toString(t):e[r]===t)return r}return-1}Object.defineProperty(exports,"__esModule",{value:!0});var o=new(function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._events={}}var o,s,l;return o=t,(s=[{key:"getListeners",value:function(e){return this._events[e].slice()||[]}},{key:"on",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(e),r(t);var s=this.getListeners(e);s.length&&i(s,t,o)>=0?console.warn("不能添加重复的listener"):(s.push(t),this._events[e]=s)}},{key:"emit",value:function(e,t){n(e);var r=this.getListeners(e);if(0!==r.length)for(var i=0;i<r.length;i++)r[i](t)}},{key:"off",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(e);var o=this.getListeners(e),s=i(o,t,r);s<0?console.warn("未找到匹配的listener"):(o.splice(s,1),this._events[e]=o)}},{key:"alloff",value:function(e){n(e),this._events[e]=[]}}])&&e(o.prototype,s),l&&e(o,l),t}());exports.EventEmitter=o;
